{# Prefer Markdown collection entries; fall back to team.json if none exist #}
{% set mdMembers = collections.team %}
{% if mdMembers and (mdMembers | length) > 0 %}
  <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
    {% for m in mdMembers %}
      <article class="card bg-base-100 shadow-lg overflow-hidden">
        {% if m.data.photo %}
          <figure class="aspect-[1/1] bg-base-300">
            <img src="{{ m.data.photo | url }}" alt="{{ m.data.name }}" loading="lazy" />
          </figure>
        {% endif %}
        <div class="card-body">
          <h3 class="card-title">{{ m.data.name }}</h3>
          {% if m.data.role %}<p class="text-sm opacity-80">{{ m.data.role }}</p>{% endif %}
          <div class="prose text-sm opacity-90 mt-3">{{ m.templateContent | safe }}</div>
        </div>
      </article>
    {% endfor %}
  </div>
{% else %}
  {% if team and team.members %}
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {% for m in team.members %}
        <article class="card bg-base-100 shadow-lg overflow-hidden">
          {% if m.photo %}
            <figure class="aspect-[1/1] bg-base-300">
              <img src="{{ m.photo | url }}" alt="{{ m.name }}" loading="lazy" />
            </figure>
          {% endif %}
          <div class="card-body">
            <h3 class="card-title">{{ m.name }}</h3>
            {% if m.role %}<p class="text-sm opacity-80">{{ m.role }}</p>{% endif %}
            {% if m.bio %}<div class="prose text-sm opacity-90 mt-3">{{ m.bio }}</div>{% endif %}
          </div>
        </article>
      {% endfor %}
    </div>
  {% endif %}
{% endif %}
